<!DOCTYPE html>
<meta charset="utf-8">
<style>

body {
  font: 10px sans-serif;
}

.axis path,
.axis line {
  fill: none;
  stroke: #000;
  shape-rendering: crispEdges;
}

.browser text {
  text-anchor: end;
}

</style>
<head>
  <script src="http://d3js.org/d3.v3.js"></script>
  <script src="../../bright.dev.js"></script>
</head>
<body>

<script>
  var initial_dataset = [{"date":"11-Oct-13","facebook.com/john":"141.62","techcrunch.com/new-artic...":"22.36","google.com/s=somet...":"25.58","twitter.com/obam...":"9.13","direct":"1.22"},
                         {"date":"11-Oct-14","facebook.com/john":"141.95","techcrunch.com/new-artic...":"22.15","google.com/s=somet...":"25.78","twitter.com/obam...":"8.79","direct":"1.25"},
                         {"date":"11-Oct-15","facebook.com/john":"137.64","techcrunch.com/new-artic...":"24.77","google.com/s=somet...":"25.96","twitter.com/obam...":"10.16","direct":"1.39"},
                         {"date":"11-Oct-16","facebook.com/john":"37.27","techcrunch.com/new-artic...":"24.65","google.com/s=somet...":"25.98","twitter.com/obam...":"10.59","direct":"1.44"},
                         {"date":"11-Oct-17","facebook.com/john":"142.74","techcrunch.com/new-artic...":"21.87","google.com/s=somet...":"25.01","twitter.com/obam...":"9.12","direct":"1.17"},
                         {"date":"11-Oct-18","facebook.com/john":"142.14","techcrunch.com/new-artic...":"22.22","google.com/s=somet...":"25.26","twitter.com/obam...":"9.1","direct":"1.19"},
                         {"date":"11-Oct-19","facebook.com/john":"41.92","techcrunch.com/new-artic...":"22.42","google.com/s=somet...":"25.3","twitter.com/obam...":"9.07","direct":"1.21"},
                         {"date":"11-Oct-20","facebook.com/john":"142.41","techcrunch.com/new-artic...":"22.08","google.com/s=somet...":"25.28","twitter.com/obam...":"8.94","direct":"1.18"},
                         {"date":"11-Oct-21","facebook.com/john":"142.74","techcrunch.com/new-artic...":"22.23","google.com/s=somet...":"25.19","twitter.com/obam...":"8.5","direct":"1.25"},
                         {"date":"11-Oct-22","facebook.com/john":"136.95","techcrunch.com/new-artic...":"25.45","google.com/s=somet...":"26.03","twitter.com/obam...":"10.06","direct":"1.42"}];

  var chart =  new Bright().width(640).height(250).initial_dataset(initial_dataset)
                      .time_interval(1000*60*60*24).chart_type('stacked-area').target('body').activate();

function sleep(millis, callback) { setTimeout(function() { callback(); }, millis) }

function one()   { chart.push({"date":"11-Oct-23", "ycombinator.com/p=12...": "15","facebook.com/john":"136.95","techcrunch.com/new-artic...":"45.45","google.com/s=somet...":"26.03","twitter.com/obam...":"10.06","direct":"1.42"}) };
function two()   { chart.push({"date":"11-Oct-24","facebook.com/john":"156.95","techcrunch.com/new-artic...":"25.45","google.com/s=somet...":"36.03","twitter.com/obam...":"10.06","direct":"1.42"}); };
function three() { chart.push({"date":"11-Oct-25", "techcrunch.com/new-artic...":"75.45","google.com/s=somet...":"46.03","twitter.com/obam...":"10.06","direct":"1.42"}); };
function four() { chart.push({"date":"11-Oct-26", "awesome.inc/ho...": "97", "dailydeal.org/fds...": "67","techcrunch.com/new-artic...":"75.45","google.com/s=somet...":"46.03","twitter.com/obam...":"10.06","direct":"1.42"}); };

sleep(3000, one); sleep(6000, two); sleep(9000, three); sleep(12000, four);

// another example with other dates

  var another_dataset = [{"date":"2014-7-17-20-57-10","facebook.com/john":"141.62","techcrunch.com/new-artic...":"22.36","google.com/s=somet...":"25.58","twitter.com/obam...":"9.13","direct":"1.22"},
                         {"date":"2014-7-17-20-57-15","facebook.com/john":"141.95","techcrunch.com/new-artic...":"22.15","google.com/s=somet...":"25.78","twitter.com/obam...":"8.79","direct":"1.25"},
                         {"date":"2014-7-17-20-57-20","facebook.com/john":"137.64","techcrunch.com/new-artic...":"24.77","google.com/s=somet...":"25.96","twitter.com/obam...":"10.16","direct":"1.39"},
                         {"date":"2014-7-17-20-57-25","facebook.com/john":"37.27","techcrunch.com/new-artic...":"24.65","google.com/s=somet...":"25.98","twitter.com/obam...":"10.59","direct":"1.44"},
                         {"date":"2014-7-17-20-57-30","facebook.com/john":"142.74","techcrunch.com/new-artic...":"21.87","google.com/s=somet...":"25.01","twitter.com/obam...":"9.12","direct":"1.17"},
                         {"date":"2014-7-17-20-57-35","facebook.com/john":"142.14","techcrunch.com/new-artic...":"22.22","google.com/s=somet...":"25.26","twitter.com/obam...":"9.1","direct":"1.19"},
                         {"date":"2014-7-17-20-57-40","facebook.com/john":"41.92","techcrunch.com/new-artic...":"22.42","google.com/s=somet...":"25.3","twitter.com/obam...":"9.07","direct":"1.21"},
                         {"date":"2014-7-17-20-57-45","facebook.com/john":"142.41","techcrunch.com/new-artic...":"22.08","google.com/s=somet...":"25.28","twitter.com/obam...":"8.94","direct":"1.18"},
                         {"date":"2014-7-17-20-57-50","facebook.com/john":"142.74","techcrunch.com/new-artic...":"22.23","google.com/s=somet...":"25.19","twitter.com/obam...":"8.5","direct":"1.25"},
                         {"date":"2014-7-17-20-57-55","facebook.com/john":"136.95","techcrunch.com/new-artic...":"25.45","google.com/s=somet...":"26.03","twitter.com/obam...":"10.06","direct":"1.42"}];

  var another_chart = new Bright().width(840).height(250).initial_dataset(another_dataset)
                            .time_interval(5000).date_format("%Y-%m-%d-%H-%M-%S").chart_type('stacked-area').target('body').activate();

function another_one()   { another_chart.push({"date":"2014-7-17-20-58-00", "ycombinator.com/p=12...": "15","facebook.com/john":"136.95","techcrunch.com/new-artic...":"45.45","google.com/s=somet...":"26.03","twitter.com/obam...":"10.06","direct":"1.42"}) };
function another_two()   { another_chart.push({"date":"2014-7-17-20-58-05","facebook.com/john":"156.95","techcrunch.com/new-artic...":"25.45","google.com/s=somet...":"36.03","twitter.com/obam...":"10.06","direct":"1.42"}); };
function another_three() { another_chart.push({"date":"2014-7-17-20-58-10", "techcrunch.com/new-artic...":"75.45","google.com/s=somet...":"46.03","twitter.com/obam...":"10.06","direct":"1.42"}); };
function another_four() { another_chart.push({"date":"2014-7-17-20-58-15", "awesome.inc/ho...": "97", "dailydeal.org/fds...": "67","techcrunch.com/new-artic...":"75.45","google.com/s=somet...":"46.03","twitter.com/obam...":"10.06","direct":"1.42"}); };

sleep(5000, another_one); sleep(10000, another_two); sleep(15000, another_three); sleep(20000, another_four);



var buggy_dataset = [{'date':'2014-7-17-21-25-10','no data':0.01},{'date':'2014-7-17-21-25-15','no data':0.01},{'date':'2014-7-17-21-25-20','no data':0.01},{'date':'2014-7-17-21-25-25','no data':0.01},{'date':'2014-7-17-21-25-30','no data':0.01},{'date':'2014-7-17-21-25-35','no data':0.01},{'date':'2014-7-17-21-25-40','no data':0.01},{'date':'2014-7-17-21-25-45','no data':0.01},{'date':'2014-7-17-21-25-50','no data':0.01},{'date':'2014-7-17-21-25-55','no data':0.01},{'date':'2014-7-17-21-26-0','no data':0.01},{'date':'2014-7-17-21-26-5','no data':0.01}];
// var buggy_dataset = [{"date":"2014-7-18-21-30-55","no data":0.01},{"date":"2014-7-18-21-31-00","no data":0.01},{"date":"2014-7-18-21-31-05","no data":0.01}]
var buggy_chart = new Bright().width(560).height(220).initial_dataset(buggy_dataset).date_format('%Y-%m-%d-%H-%M-%S').time_interval(5000).chart_type('stacked-area').target('body').activate();

// sleep(5000, function () { buggy_chart.push({"date":"2014-7-18-21-31-10","no data":0.01}) })
// sleep(10000, function () { buggy_chart.push({"date":"2014-7-18-21-31-15","no data":0.01}) })
// sleep(15000, function () { buggy_chart.push({"date":"2014-7-18-21-31-20","no data":0.01}) })
// sleep(20000, function () { buggy_chart.push({"date":"2014-7-18-21-31-25","no data":0.01}) })
// sleep(25000, function () { buggy_chart.push({"date":"2014-7-18-21-31-30","techcrunch.com":0.01}) })
// sleep(30000, function () { buggy_chart.push({"date":"2014-7-18-21-31-35","techcrunch.com":1}) })
// sleep(35000, function () { buggy_chart.push({"date":"2014-7-18-21-31-40","techcrunch.com":0.01}) })
// sleep(40000, function () { buggy_chart.push({"date":"2014-7-18-21-31-45","techcrunch.com":0.01}) })
// sleep(45000, function () { buggy_chart.push({"date":"2014-7-18-21-31-50","techcrunch.com":0.01}) })



function buggy_one()   { buggy_chart.push({'date':'2014-7-17-21-26-10', 'techcrunch.com':1}) };
function buggy_two()   { buggy_chart.push({'date':'2014-7-17-21-26-15','techcrunch.com':0}) };
function buggy_three()   { buggy_chart.push({'date':'2014-7-17-21-26-20','techcrunch.com':0}) };
sleep(5000, buggy_one);
sleep(10000, buggy_two);

// [{"date":"2014-7-17-21-25-10","techcrunch.com":0},{"date":"2014-7-17-21-25-15","techcrunch.com":0},{"date":"2014-7-17-21-25-20","techcrunch.com":0},{"date":"2014-7-17-21-25-25","techcrunch.com":0},{"date":"2014-7-17-21-25-30","techcrunch.com":0},{"date":"2014-7-17-21-25-35","techcrunch.com":0},{"date":"2014-7-17-21-25-40","techcrunch.com":0},{"date":"2014-7-17-21-25-45","techcrunch.com":0},{"date":"2014-7-17-21-25-50","techcrunch.com":1},{"date":"2014-7-17-21-25-55","techcrunch.com":0},{"date":"2014-7-17-21-26-0","techcrunch.com":0},{"date":"2014-7-17-21-26-5","techcrunch.com":0}] 1:104
// {"stamp":"2014-7-17-21-26-10","sources":["techcrunch.com"]} 1:111
// [{"date":"2014-7-17-21-26-9","techcrunch.com":0}]

</script>



